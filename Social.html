<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingniela - Social</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="Sesion.css">
    <link rel="stylesheet" href="Social.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="IniciarSesion.html"><img src="Imagenes/crown.png" alt="Kingniela Logo"></a>
        </div>
        <nav>
            <ul>
                <li><a href="Quiniela.html">Quinielas</a></li>
                <li><a href="Social.html" class="notify">Social</a></li> 
                <li><a href="Tarea.html" class="notify">Tareas</a></li>  
                <li><a href="Coronas.html">Mis Coronas</a></li>
            </ul>
        </nav>
            <div class="user-actions">
                <div class="menu-icon">
                    <a href="Simulador.html">
                        <img src="Imagenes/mundial_2026.png" alt="Simulador">
                    </a>
                </div>
                <div class="perfil">
                    <a href="Perfil.html"><img src="Imagenes/I_Perfil.png" alt="Perfil"></a>
                </div>
            </div>
    </header>

<main>
<div class="social-container">
    
    <div class="sidebar">
      <h2>Chats Activos</h2>
      <div class="direct-messages" id="chat-list-container"></div>
    </div>

    <div class="main">
      
      <div id="friends-view">
          <div class="top-buttons">
            <button id="btn-online" onclick="filterFriends('online')">En lÃ­nea</button>
            <button id="btn-all" class="active" onclick="filterFriends('all')">Todos</button>
            <button class="add-friend" onclick="openAddFriendModal()">AÃ±adir amigo</button>
          </div>

          <div class="search-box">
            <input type="text" id="search-friends" placeholder="Buscar amigo..." onkeyup="searchFriends()" />
          </div>

          <div class="friend-list" id="friends-grid"></div>
      </div>

      <div id="chat-view" class="hidden">
            <div class="chat-header">
                <div class="user-info">
                    <div class="user-avatar" id="chat-current-avatar"></div>
                    <div>
                        <p class="user-name" id="chat-current-name">Nombre Usuario</p>
                        <span class="status-text" id="chat-current-status">En lÃ­nea</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="startVideoCallBtn" class="chat-action-btn" title="Videollamada">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 7l-7 5 7 5V7z"></path><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
                    </button>
                    <span class="cerrar-chat" onclick="closeChat()">âœ•</span>
                </div>
            </div>

            <div class="chat-body" id="chat-messages"></div>

            <div class="chat-input-area">
                
                <div id="plus-menu" class="chat-plus-menu hidden">
                    <button id="attachFileBtn" class="menu-option">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                        <span>Subir archivo</span>
                    </button>
                    <button id="shareLocationBtn" class="menu-option">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        <span>UbicaciÃ³n</span>
                    </button>
                </div>

                <div class="chat-input-wrapper">
                    <input type="file" id="fileInput" style="display: none;">
                    
                    <button id="toggleMenuBtn" class="chat-action-btn plus-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                    </button>
                    
                    <input type="text" placeholder="Escribe un mensaje..." id="message-input">
                    
                    <button id="recordAudioBtn" class="chat-action-btn mic-btn">
                        <svg class="icon-mic" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                        <svg class="icon-stop hidden" width="24" height="24" viewBox="0 0 24 24" fill="red" stroke="red" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect></svg>
                    </button>

                    <button class="send-btn" onclick="sendMessage()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </div>
            </div>
      </div>
    </div>
</div>

<div id="addFriendModal" class="modal hidden">
        <div class="modal-content">
            <span class="cerrar-modal" onclick="closeAddFriendModal()">Ã—</span>
            <h2>AÃ±adir Nuevo Amigo</h2>
            <p>Busca por nombre de usuario o correo</p>
            
            <input type="text" id="input-add-friend" placeholder="Ej. JuanPerez123" class="modal-input">
            
            <button class="btn-primary modal-btn" onclick="sendFriendRequest()">Enviar Solicitud</button>
        </div>
    </div>

<div id="deleteModal" class="modal hidden">
    <div class="modal-content">
        <span class="cerrar-modal" onclick="closeDeleteModal()">&times;</span>
        <h2>Eliminar Amigo</h2>
        <p>Â¿EstÃ¡s seguro de que deseas eliminar a este amigo?</p>
        <div class="modal-actions">
            <button class="modal-btn cancel" onclick="closeDeleteModal()">Cancelar</button>
            <button class="modal-btn delete" onclick="confirmDeleteFriend()">Eliminar</button>
        </div>
    </div>
</div>

<div id="callingModal" class="call-modal hidden">
    <h3>Llamando a</h3>
    <p id="callingFriendName" style="font-size: 1.2em; color: #001f5c;">...</p>
    <div class="loader"></div>
    <button id="cancelCallBtn" class="modal-btn delete">Cancelar</button>
</div>

<div id="incomingCallModal" class="call-modal hidden">
    <h3>ðŸ“ž Llamada Entrante</h3>
    <p id="incomingCallFriendName" style="font-size: 1.2em; color: #001f5c;">...</p>
    <div class="modal-actions">
        <button id="acceptCallBtn" class="btn-accept" style="width: auto; padding: 10px 20px; border-radius: 20px;">Contestar</button>
        <button id="rejectCallBtn" class="btn-reject" style="width: auto; padding: 10px 20px; border-radius: 20px;">Colgar</button>
    </div>
</div>

<div id="videoCallContainer" class="hidden">
    <div class="video-wrapper">
        <video id="remoteVideo" autoplay playsinline></video>
        <video id="localVideo" autoplay playsinline muted></video>
    </div>
    <div class="video-controls">
        <button id="endCallBtn" class="modal-btn delete">Terminar Llamada</button>
    </div>
</div>

</main>

    <footer>
        <p>&copy; 2025 Kingniela. Todos los derechos reservados.</p>
    </footer>
    
    <img class="Corona_fondo" src="Imagenes/Corona_.png" alt="">
    <img class="tacha_fondo" src="Imagenes/TACHA.png" alt="">
    
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="js/socket.js"></script> 
    <script src="Social.js"></script>
</body>
</html>