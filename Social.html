<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingniela - Social</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="Sesion.css">
    <link rel="stylesheet" href="Social.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="IniciarSesion.html"><img src="Imagenes/crown.png" alt="Kingniela Logo"></a>
        </div>
        <nav>
            <ul>
                <li><a href="Quiniela.html">Quinielas</a></li>
                <li><a href="Social.html" class="notify">Social</a></li> 
                <li><a href="Tarea.html" class="notify">Tareas</a></li>  
                <li><a href="Coronas.html">Mis Coronas</a></li>
            </ul>
        </nav>
            <div class="user-actions">
                <div class="menu-icon">
                    <a href="Simulador.html">
                        <img src="Imagenes/mundial_2026.png" alt="Simulador">
                    </a>
                </div>
                <div class="perfil">
                    <a href="Perfil.html"><img src="Imagenes/I_Perfil.png" alt="Perfil"></a>
                </div>
            </div>
    </header>

<main>
<div class="social-container">
    
    <div class="sidebar">
      <h2>Chats Activos</h2>
      <div class="direct-messages" id="chat-list-container"></div>
    </div>

    <div class="main">
      
      <div id="friends-view">
          <div class="top-buttons">
            <button id="btn-online" onclick="filterFriends('online')">En l√≠nea</button>
            <button id="btn-all" class="active" onclick="filterFriends('all')">Todos</button>
            <button class="add-friend" onclick="openAddFriendModal()">A√±adir amigo</button>
          </div>

          <div class="search-box">
            <input type="text" id="search-friends" placeholder="Buscar amigo..." onkeyup="searchFriends()" />
          </div>

          <div class="friend-list" id="friends-grid"></div>
      </div>

      <div id="chat-view" class="hidden">
            <div class="chat-header">
                <div class="user-info">
                    <div class="user-avatar" id="chat-current-avatar"></div>
                    <div>
                        <p class="user-name" id="chat-current-name">Nombre Usuario</p>
                        <span class="status-text" id="chat-current-status">En l√≠nea</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="startVideoCallBtn" class="chat-action-btn" title="Videollamada">üé•</button>
                    <span class="cerrar-chat" onclick="closeChat()">‚úï</span>
                </div>
            </div>

            <div class="chat-body" id="chat-messages"></div>

            <div class="chat-input-area">
                <div class="chat-input-wrapper">
                    <input type="file" id="fileInput" style="display: none;">
                    
                    <button id="attachFileBtn" class="chat-action-btn" title="Adjuntar">üìé</button>
                    <button id="recordAudioBtn" class="chat-action-btn" title="Grabar Audio">üé§</button>
                    <button id="shareLocationBtn" class="chat-action-btn" title="Ubicaci√≥n">üìç</button>
                    
                    <input type="text" placeholder="Escribe un mensaje..." id="message-input">
                    <button class="send-btn" onclick="sendMessage()">‚û§</button>
                </div>
            </div>
      </div>
    </div>
</div>

<div id="addFriendModal" class="modal hidden">
        <div class="modal-content">
            <span class="cerrar-modal" onclick="closeAddFriendModal()">√ó</span>
            <h2>A√±adir Nuevo Amigo</h2>
            <p>Busca por nombre de usuario o correo</p>
            
            <input type="text" id="input-add-friend" placeholder="Ej. JuanPerez123" class="modal-input">
            
            <button class="btn-primary modal-btn" onclick="sendFriendRequest()">Enviar Solicitud</button>
        </div>
    </div>

<div id="deleteModal" class="modal hidden">
    <div class="modal-content">
        <span class="cerrar-modal" onclick="closeDeleteModal()">&times;</span>
        <h2>Eliminar Amigo</h2>
        <p>¬øEst√°s seguro de que deseas eliminar a este amigo?</p>
        <div class="modal-actions">
            <button class="modal-btn cancel" onclick="closeDeleteModal()">Cancelar</button>
            <button class="modal-btn delete" onclick="confirmDeleteFriend()">Eliminar</button>
        </div>
    </div>
</div>

<div id="callingModal" class="call-modal hidden">
    <h3>Llamando a</h3>
    <p id="callingFriendName" style="font-size: 1.2em; color: #001f5c;">...</p>
    <div class="loader"></div>
    <button id="cancelCallBtn" class="modal-btn delete">Cancelar</button>
</div>

<div id="incomingCallModal" class="call-modal hidden">
    <h3>üìû Llamada Entrante</h3>
    <p id="incomingCallFriendName" style="font-size: 1.2em; color: #001f5c;">...</p>
    <div class="modal-actions">
        <button id="acceptCallBtn" class="btn-accept" style="width: auto; padding: 10px 20px; border-radius: 20px;">Contestar</button>
        <button id="rejectCallBtn" class="btn-reject" style="width: auto; padding: 10px 20px; border-radius: 20px;">Colgar</button>
    </div>
</div>

<div id="videoCallContainer" class="hidden">
    <div class="video-wrapper">
        <video id="remoteVideo" autoplay playsinline></video>
        <video id="localVideo" autoplay playsinline muted></video>
    </div>
    <div class="video-controls">
        <button id="endCallBtn" class="modal-btn delete">Terminar Llamada</button>
    </div>
</div>

</main>

    <footer>
        <p>&copy; 2025 Kingniela. Todos los derechos reservados.</p>
    </footer>
    
    <img class="Corona_fondo" src="Imagenes/Corona_.png" alt="">
    <img class="tacha_fondo" src="Imagenes/TACHA.png" alt="">
    
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="js/socket.js"></script> <script src="Social.js"></script>
    <script src="Social.js"></script>
</body>
</html>